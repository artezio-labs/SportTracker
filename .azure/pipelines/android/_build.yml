parameters:
- name: task
  type: string
  default: assembleRelease
  values: 
  # для генерации apk
  - 'assembleDebug'
  - 'assembleRelease'
  # для генерации aab
  - ':app:bundleDebug'
  - ':app:bundleRelease'
  
steps:

- task: Gradle@2
  inputs:
    workingDirectory: ''
    gradleWrapperFile: 'gradlew'
    gradleOptions: '-Xmx3072m'
    jdkVersionOption: 1.11
    publishJUnitResults: false
    testResultsFiles: '**/TEST-*.xml'
    tasks: ${{ parameters.task }}

# #####################################################
# Copy
# #####################################################
- task: CopyFiles@2
  displayName: 'Copy Artifacts'
  inputs:
    sourceFolder: '$(Build.SourcesDirectory)'
    contents: |
      **/app/build/outputs/apk/**/*.apk
      **/app/build/outputs/bundle/**/*.aab
    targetFolder: '$(build.artifactStagingDirectory)'
    flattenFolders: true