parameters:
- name: task
  type: string
  default: assembleRelease
  values: 
  # для генерации apk
  - 'assembleDebug'
  - 'assembleRelease'
  # для генерации aab
  - ':app:bundleDebug'
  - ':app:bundleRelease'
  
steps:

# #####################################################
# Create local.properties
# #####################################################
- powershell: New-Item "$(Build.SourcesDirectory)/local.properties"
  displayName: 'Create local.properties'

# #####################################################
# Build
# #####################################################
- task: Gradle@2
  inputs:
    workingDirectory: ''
    gradleWrapperFile: 'gradlew'
    gradleOptions: '-Xmx3072m'
    options: '--warning-mode=all --scan --stacktrace'
    jdkVersionOption: 1.11
    publishJUnitResults: false
    testResultsFiles: '**/TEST-*.xml'
    tasks: ${{ parameters.task }}
